<!-- 
必要事項
このページを読んで，そのまま実行すれば全く同じことが再現できる．初心者向けのチュートリアルを書くつもりで作成する．
ただ，一旦は提出用に成果物の説明として十分なものを書けば良い
-->
# 概要
　前回の記事に引き続き， ROS2でOpenCVを用いた画像処理を行いました．前回は各ピクセルをランダム生成した画像のトピック通信を行いましたが，今回はさらに画像処理操作を加えました．今回実装した処理は①画像のグレースケール化，②輝度の調節，③コントラスト調整の3つです．

<!--　投稿用原稿

-->

## 目次
1. [概要](#概要)
1. [構成](#構成)
1. [画像のグレイスケール化](#画像のグレイスケール化)
1. [画像の輝度調節](#画像の輝度調節)
1. [画像のコントラスト調節](#画像のコントラスト調節)
<!--
1. [概要](#概要)
1. [パッケージ作成](#Chapter1)
1. [Publisher：ランダム画像の生成](#Chapter2)
1. [Subscriber：画像の出力](#Chapter2)
1. [動作確認](#Chapter3)
1. [参考文献](#reference)

-->


## 構成
　それぞれの機能ごとに単体のノードとして実装します．つまりそれぞれのノードがSubscribeした画像データを処理・変換し，再度Publishするという形です．
 
　デモではPublishされたランダム画像をSubscribeし，それぞれ処理を行いPublishするノードを作成します．処理操作によって変換された画像データは`\image_raw_transformed`（トピック名）としてSubscribeされることでGUI出力されます．


## 画像のグレイスケール化
グレースケール化は画像を白黒濃淡画像に変換する処理のこと[^1]です．通常カメラ画像はRGBの色情報を持っていますが，各ピクセルに対して以下の式を用いることにより輝度情報に変換しています．
$$Y=0.299R+0.587G+0.114B$$
ここでR,G,Bはピクセルにおける各色の強さ，Yは変換後のピクセルの輝度.


<details><summary>ソースコード</summary>

```c++:image_sub_view.cpp

```
</details>

[^1]:[Grayscale - Wikipedia](https://en.wikipedia.org/wiki/Grayscale)
## 画像の輝度調節

## 画像のコントラスト調節

